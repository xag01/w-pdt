<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Focus</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Focus">

<style>

/* ==================================================
   üé® THEMES ‚Äî EDIT COLORS HERE ONLY
================================================== */

constThemes = {
  default: {
    work:"#e74c3c",
    short:"#27ae60",
    long:"#2980b9",
    text:"#ffffff",
    glass:"rgba(0,0,0,0.35)"
  },
  midnight: {
    work:"#ff6b6b",
    short:"#4ecdc4",
    long:"#5f27cd",
    text:"#ffffff",
    glass:"rgba(10,10,20,0.45)"
  },
  earthy: {
    work:"#8b5a2b",
    short:"#5b8a3b",
    long:"#3b6f8a",
    text:"#f5f1ea",
    glass:"rgba(30,25,20,0.45)"
  }
};

:root{
  --work:#e74c3c;
  --short:#27ae60;
  --long:#2980b9;
  --text:#ffffff;
  --glass:rgba(0,0,0,0.35);
}

*{box-sizing:border-box;}

body{
  margin:0;
  font-family:-apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--text);
  transition:background .4s ease;
  overflow:hidden;
}

.bg{
  position:fixed;
  inset:0;
  background-size:cover;
  background-position:center;
  opacity:.3;
  z-index:-1;
}

.app{
  width:min(520px,92vw);
  padding:32px;
  border-radius:28px;
  backdrop-filter:blur(25px);
  background:var(--glass);
  box-shadow:0 30px 60px rgba(0,0,0,.3);
  display:flex;
  flex-direction:column;
  align-items:center;
}

@media(min-width:900px){
  .app{width:800px;}
}

.header{
  width:100%;
  display:flex;
  justify-content:space-between;
  margin-bottom:20px;
}

.icon-btn{
  background:rgba(255,255,255,.15);
  border:none;
  padding:6px 14px;
  border-radius:14px;
  color:var(--text);
  cursor:pointer;
}

.timer{
  position:relative;
  width:260px;
  height:260px;
}

svg{
  width:100%;
  height:100%;
  transform:rotate(-90deg);
}

circle{
  fill:none;
  stroke-width:12;
}

#ring-bg{stroke:rgba(255,255,255,.2);}
#ring{stroke:white;stroke-linecap:round;}

#time{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:48px;
  cursor:pointer;
}

.controls{
  margin-top:24px;
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  justify-content:center;
}

button{
  padding:8px 18px;
  border:none;
  border-radius:16px;
  cursor:pointer;
  background:rgba(255,255,255,.2);
  color:white;
}

.dots{
  display:flex;
  gap:8px;
  margin-top:24px;
}

.dot{
  width:14px;
  height:14px;
  border-radius:50%;
  background:rgba(255,255,255,.3);
  cursor:pointer;
}

.dot.active{
  transform:scale(1.3);
  box-shadow:0 0 0 2px rgba(255,255,255,.4);
}

.panel{
  position:fixed;
  inset:0;
  margin:auto;
  width:min(460px,90vw);
  padding:24px;
  border-radius:24px;
  backdrop-filter:blur(20px);
  background:var(--glass);
  display:none;
  flex-direction:column;
  gap:14px;
}

.panel.open{display:flex;}

.panel input,.panel select{
  padding:8px;
  border-radius:10px;
  border:none;
}

</style>
</head>
<body>

<div class="app">

  <div class="header">
    <h2 id="modeLabel">Work</h2>
    <button class="icon-btn" onclick="togglePanel()">‚öôÔ∏è</button>
  </div>

  <div class="timer">
    <svg viewBox="0 0 220 220">
      <circle id="ring-bg" cx="110" cy="110" r="90"></circle>
      <circle id="ring" cx="110" cy="110" r="90"></circle>
    </svg>
    <div id="time">25:00</div>
  </div>

  <div class="controls">
    <button id="startPause">Start</button>
    <button onclick="skip()">Skip</button>
    <button onclick="reset()">Reset</button>
  </div>

  <div class="dots" id="dots"></div>

</div>

<div class="panel" id="panel">
  <button onclick="togglePanel()">Close</button>

  <label>Theme
    <select id="themeSelect">
      <option value="default">Default</option>
      <option value="midnight">Midnight</option>
      <option value="earthy">Earthy</option>
    </select>
  </label>

  <label>Work (minutes)
    <input id="workInput" type="number" value="25">
  </label>

  <label>Short (minutes)
    <input id="shortInput" type="number" value="5">
  </label>

  <label>Long (minutes)
    <input id="longInput" type="number" value="15">
  </label>

  <label>Sessions before long
    <input id="intervalInput" type="number" value="4">
  </label>

  <label>
    <input type="checkbox" id="autoStart">
    Auto start next
  </label>

</div>

<script>

/* ============================
   FULL FEATURE TIMER LOGIC
============================ */

const THEMES = constThemes;

let state = {
  mode:"work",
  running:false,
  time:1500,
  total:1500,
  completed:0
};

const ring = document.getElementById("ring");
const radius=90;
const circumference=2*Math.PI*radius;
ring.style.strokeDasharray=circumference;

function updateRing(){
  ring.style.strokeDashoffset=circumference*(1-state.time/state.total);
}

function format(t){
  return String(Math.floor(t/60)).padStart(2,"0")+":"+
         String(t%60).padStart(2,"0");
}

function updateDisplay(){
  document.getElementById("time").textContent=format(state.time);
  document.title=format(state.time)+" - "+state.mode;
  updateRing();
}

function setMode(mode){
  state.mode=mode;

  const root=document.documentElement;
  const theme=THEMES[document.getElementById("themeSelect").value];

  root.style.setProperty("--work",theme.work);
  root.style.setProperty("--short",theme.short);
  root.style.setProperty("--long",theme.long);
  root.style.setProperty("--text",theme.text);
  root.style.setProperty("--glass",theme.glass);

  if(mode==="work"){
    state.total=document.getElementById("workInput").value*60;
    document.body.style.background=theme.work;
  }
  else if(mode==="short"){
    state.total=document.getElementById("shortInput").value*60;
    document.body.style.background=theme.short;
  }
  else{
    state.total=document.getElementById("longInput").value*60;
    document.body.style.background=theme.long;
  }

  state.time=state.total;
  document.getElementById("modeLabel").textContent=mode;
  buildDots();
  updateDisplay();
}

function start(){
  if(state.running) return;
  state.running=true;
  document.getElementById("startPause").textContent="Pause";

  state.interval=setInterval(()=>{
    if(state.time>0){
      state.time--;
      updateDisplay();
    }else{
      next();
    }
  },1000);
}

function pause(){
  state.running=false;
  document.getElementById("startPause").textContent="Start";
  clearInterval(state.interval);
}

document.getElementById("startPause").onclick=
  ()=> state.running?pause():start();

function next(){
  pause();
  const max=document.getElementById("intervalInput").value;

  if(state.mode==="work"){
    state.completed++;
    if(state.completed>=max){
      state.completed=0;
      setMode("long");
    }else{
      setMode("short");
    }
  }else{
    setMode("work");
  }

  if(document.getElementById("autoStart").checked) start();
}

function skip(){ next(); }
function reset(){ pause(); setMode(state.mode); }

function buildDots(){
  const dots=document.getElementById("dots");
  dots.innerHTML="";
  const max=document.getElementById("intervalInput").value;

  for(let i=0;i<max;i++){
    const dot=document.createElement("div");
    dot.className="dot";
    if(i===state.completed) dot.classList.add("active");
    dot.onclick=()=>{
      state.completed=i;
      setMode("work");
    };
    dots.appendChild(dot);
  }
}

function togglePanel(){
  document.getElementById("panel").classList.toggle("open");
}

document.getElementById("themeSelect").onchange=
  ()=> setMode(state.mode);

setMode("work");

</script>
</body>
</html>
